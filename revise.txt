речь о проеке ./packages/spa-guard

Посмотри список пунктов, список задач которые есть. Сделай пожалуйста первый пункт самым первым, остальные можешь пересмотреть приоритет, сделать их в каком-то другом порядке.

1. Посмотри гид статус, там есть измененные файлы, возьми их за основу, то есть если вкратце я убрал из рантайма, из пакета нод, я убрал happydom и сделал это на чистом, ну на parse 5, да. Потом в схеме я, ну вообще полностью из библиотеки я убрал tapebox и сделал без него просто на tape скрипте простейший парсер и типы. Обнови, соответственно, библиотеку таким образом, чтобы она поддерживала эти обновления. Ну, в общем, и дематично, там, тесты поправь, ридми поправь, возможно, что-то в самой реализации исправь, как-то сделай лучше. В общем, ну, я примерно бросал, теперь доведи его до ума.
2. давай при рендеринге spinner добавим стили к svg {width:"100%", height:"100%", aspectRatio:"1/1"}
3. spinner должен прокидываться в loading, а не вшиваться в HTML. убери из loading, если есть.
4. проверь неиспользуемые функции и потенциально ненужные. Например escapeAttr осталась с прошлого функционала, до happy-dom. Сначала спроси у меня, потом убери.
5. spinner не находится в options.html. Перенеси его туда.
6. ты почему-то не берешь из options html для fallback, loading. Их нужно доставать из options перед каждым выводом в DOM
7. во время рендеринга шаблонов не учитываются lang, dir из html. нужно их тоже учитывать при каждом рендере, так как SPA их может изменить в runtime. Вот я не уверен, как будто бы имеет смысл взять и в рантайм уже загружать переводы. И то есть условно вот тот механизм есть, который с патчингом HTML, он как будто бы нужен только один раз, если у нас произойдет какая-то ошибка, самое-самое главное, чтобы минимизировать размер inline HTML, максимально его вычленить, вот нужно типа парсить и добавлять только тот кусочек, который нужен. Да, это сильно усложняет работу и обработку, но зато inline становится меньше, как будто бы. Хотя хрен знает, возможно. Возможно, этот патчинг тоже имеет смысл полностью, а хотя мы не сможем тогда языка... Нет, патчинг оставляем, ничего с ним не делаем, просто в рантайм я предлагаю все эти переводы заимпортить, наверное. Либо не импортить, а просто предоставить функцию, чтобы из рантайма можно было переводы пропатчить. Наверное, да, вот это самый правильный вариант, типа просто предоставить возможность пользователю заимпортить весь мап с переводами, транслейшенами, да. Дальше он сам, в зависимости от того, как ему нужно, достанет нужные переводы и просто вызовет функцию, передаст туда объект с переводами для нужного, для текущего языка. Все, и дальше, ну, сама библиотека как бы дальше также будет работать только с одним объектом переводов, как будто бы вот это самый правильный вариант.


8. реорганизация. Прочитай TODO.md и запланируй его
